<section class="listing-container" *ngIf="listing">
  <section class="listing-photos">
    <main>
      <div
        [ngStyle]="{ 'background-image': 'url(/assets/images/' + listing.photos[0] + ')' }"
        alt="Main listing photo"
      ></div>
    </main>
    <aside>
      <div
        [ngStyle]="{ 'background-image': 'url(/assets/images/' + listing.photos[1] + ')' }"
        alt="Listing photo #1"
      ></div>
      <div
        [ngStyle]="{ 'background-image': 'url(/assets/images/' + listing.photos[2] + ')' }"
        alt="Listing photo #2"
      ></div>
      <div [ngStyle]="{ 'background-image': 'url(/assets/images/' + listing.photos[3] + ')' }" alt="Listing photo #3">
        <span>+{{ listing.photos.length - 3 }} Photos</span>
      </div>
    </aside>
  </section>

  <section class="listing-review">
    <main>
      <div>{{ listing.reviews.number | i18nPlural: reviewsMapping }}</div>
      <div>
        <span
          *ngFor="let star of reviewStars"
          class="material-symbols-outlined listing-review__stars"
          [ngClass]="{ fill: star === 1 }"
        >
          star
        </span>
      </div>
    </main>
    <aside>
      <button
        *ngIf="isFavorited"
        (click)="bookmark()"
        title="Remove this listing from favorites"
        class="bookmark-listing"
      >
        <span aria-hidden="false" aria-label="Remove this listing from favorites" class="material-symbols-outlined">
          bookmark_added
        </span>
      </button>
      <button *ngIf="!isFavorited" (click)="bookmark()" title="Save this listing" class="bookmark-listing">
        <span aria-hidden="false" aria-label="Save this listing" class="material-symbols-outlined"> bookmark </span>
      </button>
      <button (click)="share()" title="Share listing" class="bookmark-listing">
        <span aria-hidden="false" aria-label="Share listing" class="material-symbols-outlined"> share </span>
      </button>
    </aside>
  </section>

  <section class="listing-details">
    <h1>{{ listing.title }}</h1>
    <p>
      {{ listing.address.buildingNumber }}, {{ listing.address.street }}, {{ listing.address.city }},
      {{ listing.address.country }}
    </p>
  </section>

  <section class="listing-description">
    <p>
      {{ listing.description }}
    </p>
  </section>

  <section class="listing-amenities">
    <h3>Features</h3>
    <ul>
      <li *ngFor="let feature of listing.amenities">
        <span aria-hidden="false" aria-label="Listing amenity" class="material-symbols-outlined">{{
          feature.icon
        }}</span>
        {{ feature.label }}
      </li>
    </ul>
  </section>
</section>

<section class="booking-container">
  <app-booking-form [listing]="listing" (onRent)="onRent($event)"></app-booking-form>
</section>
