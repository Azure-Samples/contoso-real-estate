## Website Testing with Playwright

This website is tested using [Playwright](https://playwright.dev/), a modern framework for reliable end-to-end testing and automation of modern web apps.


## 1. Playwright Setup

Expand sections below for more details on initial setup.

<details>
<summary> 1. Install Playwright </summary>

To get started with Playwright, you can pick one of two options:
 - Use the [commandline](https://playwright.dev/docs/test-components#step-1-install-playwright-test-for-components-for-your-respective-framework)
 - Use the [VS Code extension](https://playwright.dev/docs/getting-started-vscode).

 We'll use the first option here for completeness, but will rely primarily on the second for all authoring, running, and debugging actions. Please [install the Playwright extension for VS Code](https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright) if you have not already done so.

Here's how we installed Playwright:
```bash
# Use valid Node.js environment
$ nvm use --lts
Now using node v18.17.0 (npm v9.6.7)

# Check current Playwright stable release
$ npx playwright --version
Version 1.36.2

# Initialize Playwright setup in website/
# Use defaults for all questions asked during install
$ cd packages/docs/website
$ npm init playwright@latest
Need to install the following packages:
  create-playwright@1.17.128
Ok to proceed? (y) 

Getting started with writing end-to-end tests with Playwright:
Initializing project in '.'
âœ” Do you want to use TypeScript or JavaScript? Â· TypeScript
âœ” Where to put your end-to-end tests? Â· tests
âœ” Add a GitHub Actions workflow? (y/N) Â· false
âœ” Install Playwright browsers (can be done manually via 'npx playwright install')? (Y/n) Â· true
..
..

Happy hacking! ðŸŽ­
```
</details>

<details>
<summary> 2. Explore Scaffold </summary>

_What did this do? Here are the main file changes:_

1. Updated website/.gitignore to ignore the following if present
    - test-results/, playwright-report/, playwright/.cache 
2. Updated website/package.json and website/package-lock.json
    - Added @playwright/test dependencies and version ^1.36.2
3. Added the playwright configuration file
    - See `playwright.config.ts`
4. Added  playwright test specification starter & demo files
    - Starter: `tests/example.spec.ts`
    - Demo: `tests-examples\demo-todo-app.spec.ts`

We'll primarily focus on the configuration file and test specifications in the `tests/` folder. 
 - Add `/tests-examples` to `website/.gitignore`. This lets us explore and use it for understanding initially, but not commit it to repo for long term.
 -  Rename `example.spec.ts` to `website.spec.ts`. This is our core test spec.

Let's validate that Playwright was setup correctly. We can walk through the commands recommended in the setup output:

```bash
# -- set current working directory as website/
$ cd website/

# Run end-to-end tests
$ npx playwright test
Running 6 tests using 6 workers
...

# Open last report
$ npx playwright show-report
Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.

# Starts the interactive UI mode.
# This launches a Trace Viewer like window for live test results
$ npx playwright test --ui   

# Runs the tests only on Desktop Chrome.
$ npx playwright test --project=chromium
Running 2 tests using 2 workers
...
    
# Runs the tests in a specific file.
# File must be in the subtree of `testDir` folder specified in config
# Ex: the command below looks for tests/*/website.spec.ts 
$ npx playwright test website
Running 6 tests using 6 workers
...
    
# Runs the tests in debug mode.
# This launches headless browser with a Playwright Inspector window beside it
$ npx playwright test --debug    
Running 6 tests using 1 worker
...
```

Note that running tests will create two directories that are .gitignored.
 -  `test-results/` = contain artifacts generated by tests
 -  `playwright-report/` = contains artifacts generated by html-reporter

Later, we'll switch to doing these actions using VS Code extensions. And we can configure the folder locations and other parameters via the CLI or config file.

</details>


## 2. Test Runner Configuration

Expand sections for overview of test configuration options and current setup.

<details>
<summary> 1. Configure Test Runner </summary>
</details>

## 3. Test Specification

Expand sections for overview of test specification structure and setup.

<details>
<summary> 1. Author Test Specs </summary>
</details>

## 4. Developer Tools

Expand sections for brief introductions to developer tooling in Playwright.

<details>
<summary> 1. Playwright Extension </summary>
</details>

<details>
<summary> 2. Playwright CLI </summary>
</details>

<details>
<summary> 3. Playwright UI Mode </summary>
</details>

<details>
<summary> 4. Test Authoring </summary>
</details>

<details>
<summary> 5. Test Debugging </summary>
</details>

<details>
<summary> 6. Test Reporting </summary>
</details>


## Troubleshooting

This section will be used to document any issues, gotchas, tips and tricks for use with Playwright.

